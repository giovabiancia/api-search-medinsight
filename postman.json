{
  "info": {
    "_postman_id": "medinsights-complete-api-collection",
    "name": "MedInsights API - Collezione Completa",
    "description": "Collezione completa per testare tutte le funzionalit√† dell'API MedInsights con supporto multi-paese (Germania e Italia)",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "version": {
      "major": 2,
      "minor": 0,
      "patch": 0
    }
  },
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:5005",
      "type": "string",
      "description": "URL base per sviluppo locale"
    },
    {
      "key": "production_url",
      "value": "https://your-production-domain.com",
      "type": "string",
      "description": "URL base per produzione"
    },
    {
      "key": "doctor_id",
      "value": "123",
      "type": "string",
      "description": "ID del dottore per test"
    },
    {
      "key": "clinic_id",
      "value": "456",
      "type": "string",
      "description": "ID della clinica per test"
    }
  ],
  "item": [
    {
      "name": "üè† General & Info",
      "item": [
        {
          "name": "API Info (Basic)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/",
              "host": ["{{base_url}}"],
              "path": [""]
            },
            "description": "Informazioni base sull'API"
          }
        },
        {
          "name": "API Info (Enhanced)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/info",
              "host": ["{{base_url}}"],
              "path": ["info"]
            },
            "description": "Informazioni complete con tutti gli endpoint disponibili"
          }
        },
        {
          "name": "Health Check General",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/health",
              "host": ["{{base_url}}"],
              "path": ["health"]
            },
            "description": "Controllo stato generale dell'API"
          }
        },
        {
          "name": "Health Check Germany",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/de/health",
              "host": ["{{base_url}}"],
              "path": ["de", "health"]
            },
            "description": "Controllo stato database Germania"
          }
        },
        {
          "name": "Health Check Italy",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/it/health",
              "host": ["{{base_url}}"],
              "path": ["it", "health"]
            },
            "description": "Controllo stato database Italia"
          }
        }
      ]
    },
    {
      "name": "üè• Doctors - Basic Search",
      "item": [
        {
          "name": "Get All Doctors (Default IT)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/doctors",
              "host": ["{{base_url}}"],
              "path": ["doctors"]
            },
            "description": "Ottieni tutti i dottori (Italia di default)"
          }
        },
        {
          "name": "Get All Doctors Germany",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/doctors?country=DE",
              "host": ["{{base_url}}"],
              "path": ["doctors"],
              "query": [
                {
                  "key": "country",
                  "value": "DE"
                }
              ]
            },
            "description": "Ottieni tutti i dottori in Germania"
          }
        },
        {
          "name": "Get All Doctors Italy",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/doctors?country=IT",
              "host": ["{{base_url}}"],
              "path": ["doctors"],
              "query": [
                {
                  "key": "country",
                  "value": "IT"
                }
              ]
            },
            "description": "Ottieni tutti i dottori in Italia"
          }
        },
        {
          "name": "Get Doctor by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/doctors?country=IT&id={{doctor_id}}",
              "host": ["{{base_url}}"],
              "path": ["doctors"],
              "query": [
                {
                  "key": "country",
                  "value": "IT"
                },
                {
                  "key": "id",
                  "value": "{{doctor_id}}"
                }
              ]
            },
            "description": "Ottieni dottore specifico per ID"
          }
        },
        {
          "name": "Get Doctors by City",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/doctors?country=IT&city=Roma",
              "host": ["{{base_url}}"],
              "path": ["doctors"],
              "query": [
                {
                  "key": "country",
                  "value": "IT"
                },
                {
                  "key": "city",
                  "value": "Roma"
                }
              ]
            },
            "description": "Cerca dottori per citt√†"
          }
        },
        {
          "name": "Get Doctors by Profession",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/doctors?country=IT&profession=Cardiologo",
              "host": ["{{base_url}}"],
              "path": ["doctors"],
              "query": [
                {
                  "key": "country",
                  "value": "IT"
                },
                {
                  "key": "profession",
                  "value": "Cardiologo"
                }
              ]
            },
            "description": "Cerca dottori per professione"
          }
        },
        {
          "name": "Get Doctors by City and Profession",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/doctors?country=IT&city=Milano&profession=Dermatologo",
              "host": ["{{base_url}}"],
              "path": ["doctors"],
              "query": [
                {
                  "key": "country",
                  "value": "IT"
                },
                {
                  "key": "city",
                  "value": "Milano"
                },
                {
                  "key": "profession",
                  "value": "Dermatologo"
                }
              ]
            },
            "description": "Cerca dottori per citt√† e professione"
          }
        }
      ]
    },
    {
      "name": "üîç Doctors - Advanced Search",
      "item": [
        {
          "name": "Advanced Search (GET)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/doctors/search?country=IT&search_term=Mario&city=Roma&min_rate=4&has_slots=true",
              "host": ["{{base_url}}"],
              "path": ["doctors", "search"],
              "query": [
                {
                  "key": "country",
                  "value": "IT"
                },
                {
                  "key": "search_term",
                  "value": "Mario"
                },
                {
                  "key": "city",
                  "value": "Roma"
                },
                {
                  "key": "min_rate",
                  "value": "4"
                },
                {
                  "key": "has_slots",
                  "value": "true"
                }
              ]
            },
            "description": "Ricerca avanzata con filtri multipli"
          }
        },
        {
          "name": "Advanced Search (POST)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"country\": \"DE\",\n    \"search_term\": \"Schmidt\",\n    \"city\": \"Berlin\",\n    \"profession\": \"Kardiologe\",\n    \"min_rate\": 3,\n    \"max_rate\": 5,\n    \"has_slots\": true,\n    \"allow_questions\": true\n}"
            },
            "url": {
              "raw": "{{base_url}}/doctors/search",
              "host": ["{{base_url}}"],
              "path": ["doctors", "search"]
            },
            "description": "Ricerca avanzata con POST JSON"
          }
        },
        {
          "name": "Advanced Search by Country URL",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/de/doctors/search?search_term=Mueller&profession=Hausarzt&min_rate=4",
              "host": ["{{base_url}}"],
              "path": ["de", "doctors", "search"],
              "query": [
                {
                  "key": "search_term",
                  "value": "Mueller"
                },
                {
                  "key": "profession",
                  "value": "Hausarzt"
                },
                {
                  "key": "min_rate",
                  "value": "4"
                }
              ]
            },
            "description": "Ricerca avanzata con paese nell'URL"
          }
        }
      ]
    },
    {
      "name": "‚≠ê Doctors - Top Rated & Available",
      "item": [
        {
          "name": "Get Top Rated Doctors",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/doctors/top-rated?country=IT&limit=10&min_rate=4",
              "host": ["{{base_url}}"],
              "path": ["doctors", "top-rated"],
              "query": [
                {
                  "key": "country",
                  "value": "IT"
                },
                {
                  "key": "limit",
                  "value": "10"
                },
                {
                  "key": "min_rate",
                  "value": "4"
                }
              ]
            },
            "description": "Ottieni dottori con rating pi√π alto"
          }
        },
        {
          "name": "Get Top Rated Doctors Germany",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/de/doctors/top-rated?limit=15&min_rate=3",
              "host": ["{{base_url}}"],
              "path": ["de", "doctors", "top-rated"],
              "query": [
                {
                  "key": "limit",
                  "value": "15"
                },
                {
                  "key": "min_rate",
                  "value": "3"
                }
              ]
            },
            "description": "Top rated dottori Germania"
          }
        },
        {
          "name": "Get Doctors with Available Slots",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/doctors/available?country=IT&city=Milano",
              "host": ["{{base_url}}"],
              "path": ["doctors", "available"],
              "query": [
                {
                  "key": "country",
                  "value": "IT"
                },
                {
                  "key": "city",
                  "value": "Milano"
                }
              ]
            },
            "description": "Dottori con slot disponibili"
          }
        },
        {
          "name": "Get Available Doctors by Profession (POST)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"country\": \"DE\",\n    \"city\": \"M√ºnchen\",\n    \"profession\": \"Zahnarzt\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/doctors/available",
              "host": ["{{base_url}}"],
              "path": ["doctors", "available"]
            },
            "description": "Dottori disponibili per professione specifica"
          }
        }
      ]
    },
    {
      "name": "üéØ Specializations",
      "item": [
        {
          "name": "Get All Specializations",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/specializations?country=IT",
              "host": ["{{base_url}}"],
              "path": ["specializations"],
              "query": [
                {
                  "key": "country",
                  "value": "IT"
                }
              ]
            },
            "description": "Ottieni tutte le specializzazioni"
          }
        },
        {
          "name": "Get Specializations Germany",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/de/specializations",
              "host": ["{{base_url}}"],
              "path": ["de", "specializations"]
            },
            "description": "Specializzazioni Germania"
          }
        },
        {
          "name": "Get Popular Specializations",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/specializations/popular?country=IT&limit=5",
              "host": ["{{base_url}}"],
              "path": ["specializations", "popular"],
              "query": [
                {
                  "key": "country",
                  "value": "IT"
                },
                {
                  "key": "limit",
                  "value": "5"
                }
              ]
            },
            "description": "Specializzazioni pi√π popolari"
          }
        },
        {
          "name": "Get Popular Specializations Germany",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/de/specializations/popular?limit=8",
              "host": ["{{base_url}}"],
              "path": ["de", "specializations", "popular"],
              "query": [
                {
                  "key": "limit",
                  "value": "8"
                }
              ]
            },
            "description": "Specializzazioni popolari Germania"
          }
        }
      ]
    },
    {
      "name": "üèôÔ∏è Cities",
      "item": [
        {
          "name": "Get All Cities with Doctors",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/cities?country=IT",
              "host": ["{{base_url}}"],
              "path": ["cities"],
              "query": [
                {
                  "key": "country",
                  "value": "IT"
                }
              ]
            },
            "description": "Tutte le citt√† con dottori disponibili"
          }
        },
        {
          "name": "Get Cities Germany",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/de/cities",
              "host": ["{{base_url}}"],
              "path": ["de", "cities"]
            },
            "description": "Citt√† Germania"
          }
        },
        {
          "name": "Get Cities Italy",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/it/cities",
              "host": ["{{base_url}}"],
              "path": ["it", "cities"]
            },
            "description": "Citt√† Italia"
          }
        }
      ]
    },
    {
      "name": "üí¨ Opinions & Reviews",
      "item": [
        {
          "name": "Get Doctor Opinions",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/doctors/{{doctor_id}}/opinions?country=IT",
              "host": ["{{base_url}}"],
              "path": ["doctors", "{{doctor_id}}", "opinions"],
              "query": [
                {
                  "key": "country",
                  "value": "IT"
                }
              ]
            },
            "description": "Recensioni per un dottore specifico"
          }
        },
        {
          "name": "Get Doctor Opinions by Country URL",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/de/doctors/{{doctor_id}}/opinions",
              "host": ["{{base_url}}"],
              "path": ["de", "doctors", "{{doctor_id}}", "opinions"]
            },
            "description": "Recensioni dottore Germania"
          }
        },
        {
          "name": "Get Doctor Opinion Statistics",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/doctors/{{doctor_id}}/opinion-stats?country=IT",
              "host": ["{{base_url}}"],
              "path": ["doctors", "{{doctor_id}}", "opinion-stats"],
              "query": [
                {
                  "key": "country",
                  "value": "IT"
                }
              ]
            },
            "description": "Statistiche recensioni dottore"
          }
        },
        {
          "name": "Get Doctor Opinion Stats Germany",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/de/doctors/{{doctor_id}}/opinion-stats",
              "host": ["{{base_url}}"],
              "path": ["de", "doctors", "{{doctor_id}}", "opinion-stats"]
            },
            "description": "Statistiche recensioni Germania"
          }
        }
      ]
    },
    {
      "name": "üè• Clinics",
      "item": [
        {
          "name": "Get Clinic Telephones",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/clinics/{{clinic_id}}/telephones?country=IT",
              "host": ["{{base_url}}"],
              "path": ["clinics", "{{clinic_id}}", "telephones"],
              "query": [
                {
                  "key": "country",
                  "value": "IT"
                }
              ]
            },
            "description": "Numeri di telefono di una clinica"
          }
        },
        {
          "name": "Get Clinic Telephones Germany",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/de/clinics/{{clinic_id}}/telephones",
              "host": ["{{base_url}}"],
              "path": ["de", "clinics", "{{clinic_id}}", "telephones"]
            },
            "description": "Telefoni clinica Germania"
          }
        },
        {
          "name": "Get Clinic Services",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/clinics/{{clinic_id}}/services?country=IT",
              "host": ["{{base_url}}"],
              "path": ["clinics", "{{clinic_id}}", "services"],
              "query": [
                {
                  "key": "country",
                  "value": "IT"
                }
              ]
            },
            "description": "Servizi offerti da una clinica"
          }
        },
        {
          "name": "Get Clinic Services Germany",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/de/clinics/{{clinic_id}}/services",
              "host": ["{{base_url}}"],
              "path": ["de", "clinics", "{{clinic_id}}", "services"]
            },
            "description": "Servizi clinica Germania"
          }
        }
      ]
    },
    {
      "name": "üìä Statistics",
      "item": [
        {
          "name": "Get Database Statistics",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/stats?country=IT",
              "host": ["{{base_url}}"],
              "path": ["stats"],
              "query": [
                {
                  "key": "country",
                  "value": "IT"
                }
              ]
            },
            "description": "Statistiche del database"
          }
        },
        {
          "name": "Get Database Statistics Germany",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/de/stats",
              "host": ["{{base_url}}"],
              "path": ["de", "stats"]
            },
            "description": "Statistiche database Germania"
          }
        },
        {
          "name": "Get Database Statistics Italy",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/it/stats",
              "host": ["{{base_url}}"],
              "path": ["it", "stats"]
            },
            "description": "Statistiche database Italia"
          }
        }
      ]
    },
    {
      "name": "üö® Error Cases & Edge Cases",
      "item": [
        {
          "name": "Invalid Country Code",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/doctors?country=FR",
              "host": ["{{base_url}}"],
              "path": ["doctors"],
              "query": [
                {
                  "key": "country",
                  "value": "FR"
                }
              ]
            },
            "description": "Test con paese non supportato"
          }
        },
        {
          "name": "Invalid Country in URL",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/fr/doctors",
              "host": ["{{base_url}}"],
              "path": ["fr", "doctors"]
            },
            "description": "Test paese non supportato nell'URL"
          }
        },
        {
          "name": "Non-existent Doctor ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/doctors/99999/opinions?country=IT",
              "host": ["{{base_url}}"],
              "path": ["doctors", "99999", "opinions"],
              "query": [
                {
                  "key": "country",
                  "value": "IT"
                }
              ]
            },
            "description": "Test con ID dottore inesistente"
          }
        },
        {
          "name": "Non-existent Clinic ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/clinics/99999/telephones?country=IT",
              "host": ["{{base_url}}"],
              "path": ["clinics", "99999", "telephones"],
              "query": [
                {
                  "key": "country",
                  "value": "IT"
                }
              ]
            },
            "description": "Test con ID clinica inesistente"
          }
        },
        {
          "name": "Invalid Search Parameters",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/doctors/search?country=IT&min_rate=invalid&max_rate=abc",
              "host": ["{{base_url}}"],
              "path": ["doctors", "search"],
              "query": [
                {
                  "key": "country",
                  "value": "IT"
                },
                {
                  "key": "min_rate",
                  "value": "invalid"
                },
                {
                  "key": "max_rate",
                  "value": "abc"
                }
              ]
            },
            "description": "Test con parametri di ricerca non validi"
          }
        }
      ]
    },
    {
      "name": "üß™ Test Workflows",
      "item": [
        {
          "name": "Complete Doctor Lookup Workflow",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/doctors?country=IT&city=Roma&profession=Cardiologo",
              "host": ["{{base_url}}"],
              "path": ["doctors"],
              "query": [
                {
                  "key": "country",
                  "value": "IT"
                },
                {
                  "key": "city",
                  "value": "Roma"
                },
                {
                  "key": "profession",
                  "value": "Cardiologo"
                }
              ]
            },
            "description": "Step 1: Trova cardiologi a Roma"
          }
        },
        {
          "name": "Get Doctor Details + Opinions",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/doctors/{{doctor_id}}/opinions?country=IT",
              "host": ["{{base_url}}"],
              "path": ["doctors", "{{doctor_id}}", "opinions"],
              "query": [
                {
                  "key": "country",
                  "value": "IT"
                }
              ]
            },
            "description": "Step 2: Ottieni recensioni del dottore"
          }
        },
        {
          "name": "Get Clinic Information",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/clinics/{{clinic_id}}/telephones?country=IT",
              "host": ["{{base_url}}"],
              "path": ["clinics", "{{clinic_id}}", "telephones"],
              "query": [
                {
                  "key": "country",
                  "value": "IT"
                }
              ]
            },
            "description": "Step 3: Ottieni contatti della clinica"
          }
        }
      ]
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Pre-request script globale",
          "console.log('Executing request to:', pm.request.url);",
          "",
          "// Imposta automaticamente Content-Type per richieste POST",
          "if (pm.request.method === 'POST') {",
          "    pm.request.headers.add({",
          "        key: 'Content-Type',",
          "        value: 'application/json'",
          "    });",
          "}"
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Test script globale",
          "pm.test('Status code is successful', function () {",
          "    pm.expect(pm.response.code).to.be.oneOf([200, 201, 202]);",
          "});",
          "",
          "pm.test('Response time is reasonable', function () {",
          "    pm.expect(pm.response.responseTime).to.be.below(5000);",
          "});",
          "",
          "pm.test('Response has JSON content-type', function () {",
          "    pm.expect(pm.response.headers.get('Content-Type')).to.include('application/json');",
          "});",
          "",
          "// Log response for debugging",
          "if (pm.response.code !== 200) {",
          "    console.log('Response status:', pm.response.status);",
          "    console.log('Response body:', pm.response.text());",
          "}"
        ]
      }
    }
  ]
}
